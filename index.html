<html>
  <head>
    <script src="vendor/jquery/jquery-1.6.2.min.js"></script>
  </head>
  <body>
  </body>
  <script>
    $(document).ready(function(e){
      var arrData = [2008,2009,2010,2011,2012,2013,2014,2015,2016,2017];
      var d1 = {
        name:"IPL",
        children:[]
      }
      arrData.forEach(function(year){
        $.ajax({
        url: "data/" + year + "-team.json",
        dataType: 'json',
        //async: false,
        success: function(data) {
          var objYear = {
            name : data.tournamentId.name,
            tournament : data.tournamentId,
            children:[]
          };

          data.squads.forEach(function(team){
            var objTeam = {
              name : team.team.shortName,
              team : team,
              children:[]
            }

            team.players.forEach(function(pl){
              var objPLayer = {
                name : pl.shortName,
                player : pl
              }
              objTeam.children.push(objPLayer);

            });
            objYear.children.push(objTeam);
          });
          d1.children.push(objYear);
          console.log(JSON.stringify(d1));
          }
      });
    });

    });
  </script>
</html>
